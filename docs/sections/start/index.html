<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-28","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Litho" href="/opensearch.xml"><title data-react-helmet="true">The Basics: DiffSection and GroupSection | Litho</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://fblitho.com/docs/sections/start/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="The Basics: DiffSection and GroupSection | Litho"><meta data-react-helmet="true" name="description" content="Introduction to Sections API"><meta data-react-helmet="true" property="og:description" content="Introduction to Sections API"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fblitho.com/docs/sections/start/"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/start/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/sections/start/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.500f1454.css">
<link rel="preload" href="/assets/js/runtime~main.0dd0a7b6.js" as="script">
<link rel="preload" href="/assets/js/main.ddc73d99.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="color:#091E42" role="banner"><div class="announcementBarContent_3EUC">Support Ukraine 🇺🇦 <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine">Help Provide Humanitarian Aid to Ukraine</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Litho</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro/motivation/">Docs</a><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a class="navbar__item navbar__link" href="/docs/tutorial/overview/">Tutorial</a><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What is Litho?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Main Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Building lists</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sections/start/">The Basics: DiffSection and GroupSection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/recycler-collection-component/">Adding and adapting RecyclerCollection to your App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/best-practices/">Best Practices and Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/hscrolls/">Nested scrolling and measurement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/api-overview/">API 📄: annotations, events and lifecycles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/working-ranges/">Advanced: Prefetch and Pagination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/services/">Advanced: Granular Dependency Injection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/view-support/">Advanced: Mixing with Android Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/diff-sections/">Advanced: Writing your own DiffSection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sections/architecture/">Internal 🏗: Sections implementation architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Animations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Visibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Testing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Widgets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Adopting Litho</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Codegen APIs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tooling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><header><h1 class="docTitle_1y8q">The Basics: DiffSection and GroupSection</h1></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction-to-sections-api">Introduction to Sections API<a aria-hidden="true" class="hash-link" href="#introduction-to-sections-api" title="Direct link to heading">​</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The Sections API, which is built on top of Litho, is a declarative, composable, and thread-safe API for writing highly-optimised List screens.</p></div></div><p>The Sections API tries to address issues experiences at Facebook when writing complex Lists, such as maintaining many view types, handling multiple data sources, and composing Lists together.</p><p>Litho Components are used for various aspects of the UI. Sections are a way of composing data into a list of Litho Components or Views.
If you visualize your screen as being a tree of components, the nodes for the root of the tree and the subtrees are Sections, while the leaves are Litho Components that represent individual items that will be displayed on screen. The following diagram shows the relationship between Sections and Litho components.</p><img src="/images/sections-intro.png" width="800px"><p>Sections use the same hierarchical declarative data model as Components.  Under the hood, Sections transparently handle processes such as calculating minimal sets of changes for data updates and granular UI refreshes. As part of Litho, the Sections API shares the same main concepts, such as annotation-based code generation, event handling, props, and state updates. Sections functionality is built on top of <a href="https://developer.android.com/guide/topics/ui/layout/recyclerview" target="_blank" rel="noopener noreferrer">Android&#x27;s RecyclerView</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="list-building-blocks">List Building Blocks<a aria-hidden="true" class="hash-link" href="#list-building-blocks" title="Direct link to heading">​</a></h2><p>In this document, you&#x27;ll be walked through the parts necessary to build a list: a <code>RecyclerCollectionComponent</code> for your layout, which sets several <code>DiffSection</code> that are either <code>SingleComponentSection</code> or <code>DataDiffSection</code>, all contained inside <code>GroupSection</code> hierarchies.</p><p>As preparation, the following 10-minute video &#x27;Litho Lessons: Diffing in Sections&#x27; covers the basics of how diffing operates.</p><div align="center"><iframe padding-top="10px" width="560" height="315" src="https://www.youtube-nocookie.com/embed/-Ahskig2Lw0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="recyclercollectioncomponent">RecyclerCollectionComponent<a aria-hidden="true" class="hash-link" href="#recyclercollectioncomponent" title="Direct link to heading">​</a></h3><p>You can use the <code>RecyclerCollectionComponent</code>, as you would use any other component in the framework, by building it and adding it as a child in your layout, as shown in the following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">RecyclerCollectionComponent.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .section(createGroupSection())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For now, this is all you need to know about adding Sections to your layout.
For advanced use cases, such as snapping and horizontal Lists, see the <a href="/docs/sections/recycler-collection-component/">RecyclerCollectionComponent</a> page.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="diffsection">DiffSection<a aria-hidden="true" class="hash-link" href="#diffsection" title="Direct link to heading">​</a></h3><p>Most Lists are composed of groups of homogeneous items interleaved with one-off items: picture a list of contacts sorted alphabetically and separated by headers indicating the first letter of the contact&#x27;s name.</p><p>Following this model, the Sections API ships two <code>DiffSectionSpec</code> implementations that can be combined to represent the structure of nearly any surface: <code>SingleComponentSection</code> and <code>DataDiffSection</code>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="singlecomponentsection">SingleComponentSection<a aria-hidden="true" class="hash-link" href="#singlecomponentsection" title="Direct link to heading">​</a></h4><p>A <code>SingleComponentSection</code> is used to represent a <strong>one-off row</strong> in a complex list. As the name suggests, you can use this Section to render a single Component, which is passed to this Section as its only prop.</p><p>One of the typical use cases of a <code>SingleComponentSection</code> is to add a loading spinner at the end of a list:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">SingleComponentSection.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .component(Progress.create(c).build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or a header for your data:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">SingleComponentSection.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .component(Text.create(c).text(&quot;Friends&quot;).build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="datadiffsection">DataDiffSection<a aria-hidden="true" class="hash-link" href="#datadiffsection" title="Direct link to heading">​</a></h4><p>A <code>DataDiffSection</code> is used to represent a <strong>homogeneous list of immutable data</strong>.
The minimal information that you must pass to a <code>DataDiffSection</code> is the list of items that it needs to render and a callback for rendering each item in this list.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">DataDiffSection.&lt;MyModel&gt;create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .data(ImmutableList.of(new MyModel(1), new MyModel(2), new MyModel(3)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .renderEventHandler(MyGroupSection.onRenderEdge(c));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>DataDiffSection</code> is designed to efficiently render the parts of a surface that handle large flows of data. When an item at a certain position needs to be displayed on screen, the framework will check whether the model received in the new list of data changed since the last time it was rendered.</p><p>If the data changed for the item in that position, the framework would dispatch a <code>RenderEvent</code> for that item, and the <code>DataDiffSection</code> will use the <code>RenderEvent</code> handler passed as a prop to create a Component for that item and display it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@OnEvent(RenderEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static RenderInfo onRenderEdge(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SectionContext c,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @FromEvent MyModel model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ComponentRenderInfo.create()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .component(MyModelItemComponent.create(c).item(model).build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>By default, <code>DataDiffSection</code> will detect data changes by checking instance equality and subsequently calling <code>equals</code> on the objects in the data list.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>For a deep dive into how to build performant and accurate diffing, including diffing for classes where <code>equals</code> is not overridden, see the <a href="/docs/sections/best-practices/">Best Practices and Performance</a> documentation.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="groupsection">GroupSection<a aria-hidden="true" class="hash-link" href="#groupsection" title="Direct link to heading">​</a></h3><p>A <code>GroupSectionSpec</code> is used to <strong>structure your Sections into a hierarchy</strong>, each one responsible for rendering its own chunk of data.</p><p>Group section specs are classes annotated with <code>@GroupSectionSpec</code>. Implementing a <code>GroupSectionSpec</code> is very simple: you only need to write one method annotated with <code>@OnCreateChildren</code>. This method returns a tree of Sections that will have root in this <code>GroupSectionSpec</code>.</p><p>The following code shows how you could declare a simple list that contains a header followed by a list of <code>String</code> items:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@GroupSectionSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SimpleListSectionSpec {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateChildren</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Children onCreateChildren(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SectionContext c,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Prop String headerTitle,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Prop List&lt;String&gt; data) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Children.create()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SingleComponentSection.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .component(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Text.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .text(headerTitle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .build()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DataDiffSection.&lt;String&gt;create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .data(data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .renderEventHandler(SimpleListSection.onRender(c)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnEvent(RenderEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static RenderInfo onRender(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SectionContext c,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @FromEvent String model) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ComponentRenderInfo.create()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .component(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Text.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .text(model)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="putting-all-the-pieces-together">Putting all the Pieces Together<a aria-hidden="true" class="hash-link" href="#putting-all-the-pieces-together" title="Direct link to heading">​</a></h2><p>Imagine a surface that has multiple sub-sections consisting of a header and list of Strings. An example of this is a list of contacts grouped alphabetically, delimited by headers showing the first letter of the name. This could be achieved easily by creating a <code>GroupSectionSpec</code> that has a <code>SimpleListSection</code> child for every letter, as described in the following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@GroupSectionSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ContactsSectionSpec {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateChildren</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Children onCreateChildren(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SectionContext c,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Prop List&lt;String&gt; data) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final Children.Builder builder = Children.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(char firstLetter = &#x27;A&#x27;; firstLetter &lt;= &#x27;Z&#x27;; firstLetter++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SimpleListSection.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .key(String.valueOf(firstLetter))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .headerTitle(String.valueOf(firstLetter))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .data(getItemsForLetter(firstLetter, data)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return build.build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The following image is a representation of the tree of Sections that has its root in <code>ContactsSectionSpec</code>. Each node in the tree is a Section, and the leaves are Components that can be rendered on screen. Each one of the sections in the tree acts as a data source.  Its purpose is to describe what data it needs and how that data should be rendered.</p><img src="/images/group-section-spec.png" width="800"><p>The Sections hierarchy becomes a data source for the <code>RecyclerCollectionComponent</code>.  You only have to pass the data that the <code>ContactsSection</code> will use to create each <code>SimpleListSection</code>, as shown in the following code.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@OnCreateLayout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static Component onCreateLayout(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RecyclerCollectionComponent.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .section(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ContactsSection.create(new SectionContext(c))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .dataModel(ImmutableList.of(&quot;Andy&quot;, &quot;Aziz&quot;, &quot;Aditya&quot;, &quot;Nico&quot;, &quot;Sergey&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The complexity of handling operations on your list, such as inserts or removes, is hidden away and handled by the infrastructure.</p></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="further-reading">Further Reading<a aria-hidden="true" class="hash-link" href="#further-reading" title="Direct link to heading">​</a></h2><p>Start by reading <a href="/docs/sections/best-practices/">Best Practices and Performance</a>.</p><p>Afterwards, read any/all of the following documents:</p><ul><li><a href="/docs/sections/recycler-collection-component/">Adding and Adapting RecyclerCollection to your App</a></li><li><a href="/docs/sections/services/">Advanced Topic: Granular Dependency Injection</a></li><li><a href="/docs/sections/working-ranges/">Advanced Topic: Prefetch and pagination</a>.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/litho/edit/master/website/../docs/sections/start.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/mainconcepts/coordinate-state-actions/keys-and-identity/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Keys and Component Identity</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sections/recycler-collection-component/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adding and adapting RecyclerCollection to your App<!-- --> »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-to-sections-api" class="table-of-contents__link toc-highlight">Introduction to Sections API</a></li><li><a href="#list-building-blocks" class="table-of-contents__link toc-highlight">List Building Blocks</a><ul><li><a href="#recyclercollectioncomponent" class="table-of-contents__link toc-highlight">RecyclerCollectionComponent</a></li><li><a href="#diffsection" class="table-of-contents__link toc-highlight">DiffSection</a></li><li><a href="#groupsection" class="table-of-contents__link toc-highlight">GroupSection</a></li></ul></li><li><a href="#putting-all-the-pieces-together" class="table-of-contents__link toc-highlight">Putting all the Pieces Together</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contributing/">How To Contribute</a></li><li class="footer__item"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open Source Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/fblitho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0dd0a7b6.js"></script>
<script src="/assets/js/main.ddc73d99.js"></script>
</body>
</html>