"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8845],{3905:(e,n,t)=>{t.r(n),t.d(n,{MDXContext:()=>d,MDXProvider:()=>s,mdx:()=>x,useMDXComponents:()=>p,withMDXComponents:()=>c});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o.apply(this,arguments)}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function m(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=i.createContext({}),c=function(e){return function(n){var t=p(n.components);return i.createElement(e,o({},n,{components:t}))}},p=function(e){var n=i.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=p(e.components);return i.createElement(d.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},v=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,d=m(e,["components","mdxType","originalType","parentName"]),c=p(t),s=a,v=c["".concat(r,".").concat(s)]||c[s]||u[s]||o;return t?i.createElement(v,l(l({ref:n},d),{},{components:t})):i.createElement(v,l({ref:n},d))}));function x(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=v;var l={};for(var m in n)hasOwnProperty.call(n,m)&&(l[m]=n[m]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var d=2;d<o;d++)r[d]=t[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}v.displayName="MDXCreateElement"},34828:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>d,default:()=>v,frontMatter:()=>m,metadata:()=>c,toc:()=>s});var i=t(83117),a=t(80102),o=(t(67294),t(3905)),r=t(86341),l=["components"],m={id:"enabling-reconciliation",title:"Enabling Reconciliation"},d=void 0,c={unversionedId:"deep-dive/reconciliation/enabling-reconciliation",id:"deep-dive/reconciliation/enabling-reconciliation",title:"Enabling Reconciliation",description:"Reconciliation is enabled by default.",source:"@site/../docs/deep-dive/reconciliation/enabling-reconciliation.mdx",sourceDirName:"deep-dive/reconciliation",slug:"/deep-dive/reconciliation/enabling-reconciliation",permalink:"/docs/deep-dive/reconciliation/enabling-reconciliation",draft:!1,editUrl:"https://github.com/facebook/litho/edit/master/website/../docs/deep-dive/reconciliation/enabling-reconciliation.mdx",tags:[],version:"current",frontMatter:{id:"enabling-reconciliation",title:"Enabling Reconciliation"}},p={},s=[{value:"ComponentTree",id:"componenttree",level:2},{value:"RecyclerCollectionComponent",id:"recyclercollectioncomponent",level:2},{value:"Sections",id:"sections",level:2}],u={toc:s};function v(e){var n=e.components,t=(0,a.Z)(e,l);return(0,o.mdx)("wrapper",(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,o.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,o.mdx)("h5",{parentName:"div"},(0,o.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,o.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.mdx)("div",{parentName:"div",className:"admonition-content"},(0,o.mdx)("p",{parentName:"div"},"Reconciliation is enabled by default."))),(0,o.mdx)(r.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,o.mdx)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,o.mdx)("h5",{parentName:"div"},(0,o.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,o.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.mdx)("div",{parentName:"div",className:"admonition-content"},(0,o.mdx)("p",{parentName:"div"},"Reconciliation has been explicitly disabled throughout fbsource because reconciliation skips some lifecycle calls that some components may have (incorrectly) come to rely on. Before proceeding, please remove the use of the following deprecated APIs in your surface.")))),(0,o.mdx)(r.OssOnly,{mdxType:"OssOnly"},(0,o.mdx)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,o.mdx)("h5",{parentName:"div"},(0,o.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,o.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.mdx)("div",{parentName:"div",className:"admonition-content"},(0,o.mdx)("p",{parentName:"div"},"Before proceeding, please remove the use of the following deprecated APIs in your surface.")))),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"// Remove use of\nLithoView#create(Context, Component, boolean): LithoView\nLithoView#create(ComponentContext, Component, boolean): LithoView\nLithoView#setComponentWithoutReconciliation(Component): void\nLithoView#setComponentAsyncWithoutReconciliation(Component): void\n\n// Instead use\nLithoView#create(Context, Component): LithoView\nLithoView#create(ComponentContext, Component): LithoView\nLithoView#setComponent(Component): void\nLithoView#setComponentAsync(Component): void\n")),(0,o.mdx)(r.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,o.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,o.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,o.mdx)("h5",{parentName:"div"},(0,o.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,o.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.mdx)("div",{parentName:"div",className:"admonition-content"},(0,o.mdx)("p",{parentName:"div"},"Please remove the use of the prop ",(0,o.mdx)("inlineCode",{parentName:"p"},"isReconciliationEnabled")," from ",(0,o.mdx)("inlineCode",{parentName:"p"},"FBInfiniteHScroll")," in your surface.")))),(0,o.mdx)("h2",{id:"componenttree"},"ComponentTree"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"ComponentTree")," builder exposes an API to enable or disable reconciliation:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"ComponentTree.create(context)\n  .isReconciliationEnabled(true)\n  .build();\n")),(0,o.mdx)(r.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,o.mdx)("p",null,"Example integrations:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/azpz7q8u"},"Feed")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/xv0puz80"},"Story Viewer")))),(0,o.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,o.mdx)("h5",{parentName:"div"},(0,o.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,o.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.mdx)("div",{parentName:"div",className:"admonition-content"},(0,o.mdx)("p",{parentName:"div"},"In this integration, the config is not passed into any Sections within the component hierarchy. It needs to be explicitly set in the Sections (see below). There are plans to enable\npropagation over the Section boundary in future milestones."))),(0,o.mdx)("h2",{id:"recyclercollectioncomponent"},"RecyclerCollectionComponent"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"RecyclerBinderConfiguration")," and the ",(0,o.mdx)("inlineCode",{parentName:"p"},"RecyclerBinder")," builders both expose an API to enable or disable reconciliation:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"RecyclerBinderConfiguration.create()\n  .isReconciliationEnabled(false)\n  .build();\n")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"new RecyclerBinder.Builder()\n  .isReconciliationEnabled(true)\n  .build(context);\n")),(0,o.mdx)(r.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,o.mdx)("p",null,"Example integrations:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/l10jx2ys"},"Notifications Tab")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/ld30lvlm"},"Watch Tab")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/tp4j1arg"},"Profile Tab")))),(0,o.mdx)("h2",{id:"sections"},"Sections"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"ComponentRenderInfo")," builder exposes an API to enable or disable reconciliation for individual Sections in a ",(0,o.mdx)("inlineCode",{parentName:"p"},"GroupSectionSpec"),":"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"ComponentRenderInfo.create()\n  .component(component)\n  .customAttribute(ComponentRenderInfo.RECONCILIATION_ENABLED, false)\n  .build();\n")),(0,o.mdx)(r.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,o.mdx)("p",null,"Example integrations:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/2h1npnoj"},"PaginatedStoriesHScrollSectionSpec")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://fburl.com/diffusion/jhsnym17"},"StoriesHScrollSectionSpec")))))}v.isMDXComponent=!0}}]);